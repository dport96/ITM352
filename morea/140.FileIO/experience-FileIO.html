<!DOCTYPE html>
<html lang="en">
<head>
  <title> ITM 352 | Lab: File I/O </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">

  <link rel="stylesheet" href="/ITM352/css/themes/spacelab/bootstrap.min.css">
  <link rel="stylesheet" href="/ITM352/css/style.css">
  <link rel="stylesheet" href="/ITM352/css/syntax.css">
  <link rel="shortcut icon" href="/ITM352/favicon.ico" type="image/x-icon" />
  <script src="https://kit.fontawesome.com/020726ec0d.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>

  

  <!-- Load JQuery, then use it to attach the class 'active' to navbar item currently displayed. -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script>
    $(window).on('load', function () {
      $('.nav-item').find('a[href="' + location.pathname + '"]').addClass('active');
    });
  </script>

</head>
<body>

<div class="navbar navbar-expand-lg fixed-top navbar-light bg-light">
  <div class="container">
    <a class="navbar-brand" href="/ITM352/index.html"> ITM 352 </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav">
        
        <li class="nav-item"><a class="nav-link" href="/ITM352/modules/">Modules</a></li>
        
        <li class="nav-item"><a class="nav-link" href="/ITM352/outcomes/">Outcomes</a></li>
        
        
        <li class="nav-item"><a class="nav-link" href="/ITM352/readings/">Readings</a></li>
        
        
        <li class="nav-item"><a class="nav-link" href="/ITM352/experiences/">Experiences</a></li>
        
        
        
        <li class="nav-item"><a class="nav-link" href="/ITM352/schedule/">Schedule</a></li>
        
      </ul>
    </div>
  </div>
</div>

<!-- Internal fragment for displaying the breadcrumb bar -->
<div class="breadcrumb-background" style="padding-top: 1em; padding-bottom: .01em">
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        
        <li class="breadcrumb-item"><a href="/ITM352/">Home</a></li>
        <li class="breadcrumb-item"><a href="/ITM352/modules">Modules</a></li>
        <li class="breadcrumb-item"><a href="/ITM352/modules/FileIO">File I/O</a></li>
        <li class="breadcrumb-item active">Lab: File I/O</li>
      </ol>
    </nav>
  </div>
</div>


<div class="container">
  <h3 id="instructions">Instructions:</h3>
<p>When asked by the instructor do the lab exercises listed. Use JAVASCRIPT unless asked to do otherwise.
Do all your code work in VS Code. Please ask the instructor for help if you get stuck this is <strong>NOT</strong> a test.</p>

<p><strong>YOU MUST SUBMIT YOUR ANSWERS TO THE EXERCISES ON THE LAULIMA ASSIGNMENT LISTED ABOVE</strong></p>

<h4 id="exercise-1-reading-text-files-7-minutes">Exercise 1: Reading text files (7 minutes)</h4>

<p>Create a text file using notepad (or your favorite text editor) with a few bits of user information data in JSON format. Save the following to a file <code class="language-plaintext highlighter-rouge">filename = 'user_data.json'</code></p>
<pre><code class="language-JSON">{
"dport": {"name": "Dan Port", "password": "portspassword", "email": "dport@hawaii.edu"},
"kazman": {"name": "Rick Kazman", "password": "kazmanpassword", "email": "kazman@hawaii.edu"},
"itm352": {"name": "ITM 352", "password": "grader", "email": "itm352@hawaii.edu"}
}
</code></pre>

<p>a) Use <code class="language-plaintext highlighter-rouge">require()</code> to load and parse <code class="language-plaintext highlighter-rouge">user_data.json</code> into an object and assign it to <code class="language-plaintext highlighter-rouge">users_reg_data</code> and output this object to the console. Use the object to get the password information for the username <code class="language-plaintext highlighter-rouge">kazman</code>.</p>

<p>b) Write a small program that uses <code class="language-plaintext highlighter-rouge">readFileSync(filename, 'utf-8')</code> to open and read this file and assign the return value to <code class="language-plaintext highlighter-rouge">data</code> use <code class="language-plaintext highlighter-rouge">JSON.parse()</code> to convert the JSON string into an object and assign it to <code class="language-plaintext highlighter-rouge">users_reg_data</code> variable and output this object to the console. Explain why you might use this was to load the data rather than <code class="language-plaintext highlighter-rouge">require()</code>. Don’t forget to remove the <code class="language-plaintext highlighter-rouge">require()</code> statement used in (a). Hint: what if the data is not JSON?</p>

<p>c) CRUD stands for Create, Read, Update, and Delete, which are the four basic operations that can be performed on data in a database or a computer system. These operations are fundamental to file I/O. Explain what CRUD operations are needed and where they are needed in Assignment 1.</p>

<p>d) Discuss how ease and efficiency of CRUD operations are affected by the format of the data in a file. For the format suggested here (JSON), explain the pros and cons of this data format.</p>

<h4 id="exercise-2-existence-and-filesize-total-6-minutes">Exercise 2: Existence and Filesize (total 6 minutes)</h4>

<p>a) (4 minutes) Modify your program in #1 to only open the file if it exists using <code class="language-plaintext highlighter-rouge">fs.existsSync(filename)</code></p>

<p>b) (2 minutes) Modify program in part (a) to print out the size of your user_data.dat file using <code class="language-plaintext highlighter-rouge">fs.statSync(filename)</code>. Have it output to the console <code class="language-plaintext highlighter-rouge">user_data.json has xxx characters</code> where <code class="language-plaintext highlighter-rouge">xxx</code> is the filesize.</p>

<h4 id="exercise-3-processing-a-login-4-minutes">Exercise 3: Processing a login (4 minutes)</h4>

<p>a) Add the following to your program from #2</p>
<pre><code class="language-Javascript">const express = require('express');
const app = express();


app.use(express.urlencoded({ extended: true }));

app.get("/login", function (request, response) {
    // Give a simple login form
    str = `
&lt;body&gt;
&lt;form action="" method="POST"&gt;
&lt;input type="text" name="username" size="40" placeholder="enter username" &gt;&lt;br /&gt;
&lt;input type="password" name="password" size="40" placeholder="enter password"&gt;&lt;br /&gt;
&lt;input type="submit" value="Submit" id="submit"&gt;
&lt;/form&gt;
&lt;/body&gt;
    `;
    response.send(str);
 });

app.post("/login", function (request, response) {
    // Process login form POST and redirect to logged in page if ok, back to login page if not

});

app.listen(8080, () =&gt; console.log(`listening on port 8080`));
</code></pre>
<p>Now add code to the app.post() callback function to check if a username and password submitted in the form match a username and password stored in <code class="language-plaintext highlighter-rouge">users_reg_data</code>. If so, generate a <code class="language-plaintext highlighter-rouge">&lt;username&gt; logged in</code> page. If not, redirect back to the login page. If you had data from another page, how might keep this data around until a successful login?</p>

<h4 id="exercise-4-adding-to-or-modifying-a-file-6-minutes">Exercise #4: Adding to or modifying a File (6 minutes)</h4>
<p>a) In your program just after you define the <code class="language-plaintext highlighter-rouge">users_reg_data</code> object, add a new user information as follows:</p>
<pre><code class="language-Javascript">username = 'newuser';
users_reg_data[username] = {};
users_reg_data[username].password = 'newpass';
users_reg_data[username].email = 'newuser@user.com';
</code></pre>
<p>Now after this code write the <code class="language-plaintext highlighter-rouge">users_reg_data</code> object to <code class="language-plaintext highlighter-rouge">user_data.json</code> using  <code class="language-plaintext highlighter-rouge">JSON.stringify()</code> and <code class="language-plaintext highlighter-rouge">fs.writeFileSync()</code>. Note this will overwrite the previous data in the file.</p>

<p>a) Add the following to your program in (a):</p>
<pre><code class="language-Javascript">app.get("/register", function (request, response) {
    // Give a simple register form
    str = `
&lt;body&gt;
&lt;form action="" method="POST"&gt;
&lt;input type="text" name="username" size="40" placeholder="enter username" &gt;&lt;br /&gt;
&lt;input type="password" name="password" size="40" placeholder="enter password"&gt;&lt;br /&gt;
&lt;input type="password" name="repeat_password" size="40" placeholder="enter password again"&gt;&lt;br /&gt;
&lt;input type="email" name="email" size="40" placeholder="enter email"&gt;&lt;br /&gt;
&lt;input type="submit" value="Submit" id="submit"&gt;
&lt;/form&gt;
&lt;/body&gt;
    `;
    response.send(str);
 });

 app.post("/register", function (request, response) {
    // process a simple register form

 });
</code></pre>
<p>Add code to the callback of <code class="language-plaintext highlighter-rouge">app.post("/register")</code> that adds the submitted form data to <code class="language-plaintext highlighter-rouge">users_reg_data</code> then saves this updated object to <code class="language-plaintext highlighter-rouge">user_data.json</code> using <code class="language-plaintext highlighter-rouge">JSON.stringify()</code> as you did in (a). Redirect to the login page when done and test that the new user can login.</p>

<p>c) Add code in <code class="language-plaintext highlighter-rouge">app.post("/register")</code> that checks if the username does not exist in <code class="language-plaintext highlighter-rouge">users_reg_data</code> (it is suggested you use <code class="language-plaintext highlighter-rouge">users_reg_data.hasOwnProperty(username)</code>) and that the password and repeat_password match. If both are true, then save the new user info as in (b) above. If not, redirect to the register page. Hint: Put the code you wrote in (b) inside an if-statement.</p>

<h4 id="bonus-extra-credit">Bonus Extra Credit:</h4>
<p>a) Make the login form “sticky” so when they redisplay the user does not have to re-enter their information. Do this either by (1) Making the login page use data in a query string to fill the form. (2) have the server add the data to the form when the page os generated</p>

<p>b) Make the login page indicate a login error. Either (1) a delayed HTTP redirect form the page, or (2) Pass the error to the page form the server and have the page display the error</p>

</div>




<!-- Maybe find a different way?
<script src="/ITM352/js/scrollIfAnchor.js"></script>
-->

<footer class="footer footer-background" style="padding-top: 1em; padding-bottom: 1em">
  <div class="container text-center">
    
    <p>Dan Port | Information Technology Management | University of Hawaii, Manoa <br />
dport@hawaii.edu<br /></p>

    
    <p style="margin: 0">Powered by the <a class="footer-link" href="https://morea-framework.github.io/">Morea Framework</a> (Theme: spacelab)<br>
      Last update on: <span>2023-12-06 16:10:13 -1000</span></p>

    <p style="margin: 0">
      
      19 modules
      
      | 19 outcomes
      
      
      | 42 readings
      
      
      | 86 experiences
      
      
    </p>
  </div>
</footer>


<!-- Load Bootstrap JavaScript components -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>


<script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-MML-AM_CHTML">
</script>


<!-- Add anchors to pages. -->
<script>anchors.add();</script>


</body>
</html>
