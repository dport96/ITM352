<!DOCTYPE html>
<html lang="en">
<head>
  <title> ITM 352 | Lab: Introducing Server Side Processing using Node.js </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">

  <link rel="stylesheet" href="/ITM352/css/themes/spacelab/bootstrap.min.css">
  <link rel="stylesheet" href="/ITM352/css/style.css">
  <link rel="stylesheet" href="/ITM352/css/syntax.css">
  <link rel="shortcut icon" href="/ITM352/favicon.ico" type="image/x-icon" />
  <script src="https://kit.fontawesome.com/020726ec0d.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>

  

  <!-- Load JQuery, then use it to attach the class 'active' to navbar item currently displayed. -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script>
    $(window).on('load', function () {
      $('.nav-item').find('a[href="' + location.pathname + '"]').addClass('active');
    });
  </script>

</head>
<body>

<div class="navbar navbar-expand-lg fixed-top navbar-light bg-light">
  <div class="container">
    <a class="navbar-brand" href="/ITM352/index.html"> ITM 352 </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav">
        
        <li class="nav-item"><a class="nav-link" href="/ITM352/modules/">Modules</a></li>
        
        <li class="nav-item"><a class="nav-link" href="/ITM352/outcomes/">Outcomes</a></li>
        
        
        <li class="nav-item"><a class="nav-link" href="/ITM352/readings/">Readings</a></li>
        
        
        <li class="nav-item"><a class="nav-link" href="/ITM352/experiences/">Experiences</a></li>
        
        
        
        <li class="nav-item"><a class="nav-link" href="/ITM352/schedule/">Schedule</a></li>
        
      </ul>
    </div>
  </div>
</div>

<!-- Internal fragment for displaying the breadcrumb bar -->
<div class="breadcrumb-background" style="padding-top: 1em; padding-bottom: .01em">
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        
        <li class="breadcrumb-item"><a href="/ITM352/">Home</a></li>
        <li class="breadcrumb-item"><a href="/ITM352/modules">Modules</a></li>
        <li class="breadcrumb-item"><a href="/ITM352/modules/"></a></li>
        <li class="breadcrumb-item active">Lab: Introducing Server Side Processing using Node.js</li>
      </ol>
    </nav>
  </div>
</div>


<div class="container">
  <h1 id="lab-objectives">Lab objectives</h1>
<ul>
  <li>Understand how web pages are requested from a server</li>
  <li>Understand how web page requests are handled by server and the role of files and document root</li>
  <li>Understand how web pages are constructed in a browser from HTML, CSS, and the DOM</li>
  <li>Understand HTTP and web server - browser communication</li>
</ul>

<h1 id="instructions">Instructions</h1>
<p>Try to do as many of the exercises as possible, in the order listed. You may skip an exercise if it is impossible to accomplish the task described (for technical reasons). If you have trouble with an exercise, contact the instructor for help – do not just skip the exercise! You may work with a partner, but each of you must submit your individual work. Work should be done electronically on this document (cut and paste as needed but be careful of incorrect characters). Anything that involves code should be tried out in VS Code before submitting (you may cut and paste directly from VS Code). Submit work before the next class. If you cannot submit by this time, try to do so as soon as possible.</p>

<p>You may wish to open the <a href="ITM352_Server_Side_Processing.ppt">presentation slides</a> for convenience of viewing and copy-paste. When asked by the instructor do the lab exercises indicated. If you get done early, feel free to go on. If you are not done before the instructor indicates the next exercise, raise your hand and explain where you are at. Later parts often depend on completing previous parts so do not let yourself get behind and expect to catch up!</p>

<p>Note: Whenever you see something like <Your Name=""> and it's not obviously an HTML tag, it means replace this with you own information as indicated inside. e.g. replace <Your Name=""> with Joe (or whatever your name is).</Your></Your></p>

<p>For exercises that do not ask specific questions but have you perform tasks, copy any code you created and the output as your answer to the exercise. Some exercises ask for explanations. Make notes for your answer and complete these after class before submitting. Do not try to make complete answers if it keeps you from progressing!</p>

<p>Do all your code work in VS Code. Copy and paste from there. Please ask the instructor for help if you get stuck this is <strong>NOT</strong> a test.</p>

<h1 id="submission">Submission</h1>
<p>When we are done, submit work before the next class. If you cannot submit by this time, try to do so as soon as possible after class. Copy this lab with your answers and paste your into the Laulima assignment submission box to [Laulima Assignment Lab://laulima.hawaii.edu). If you do not submit something to Laulima you will not get credit.</p>

<p>The presentation is at
<a href="ITM352_Server_Side_Processing.ppt">server side processing using JAVASCRIPT presentation slides</a></p>

<h4 id="exercise-1">Exercise #1:</h4>
<p>What is “server side” processing mean? How can this make web pages dynamic?</p>

<h4 id="exercise-2">Exercise #2:</h4>

<p>Create a Lab4 folder in your repo and a new file <code class="language-plaintext highlighter-rouge">Ex2.js</code> and copy the following into this file:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">http</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">//create a server object:</span>
<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">);</span> <span class="c1">//output the request headers to the console</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text/html</span><span class="dl">'</span> <span class="p">});</span> <span class="c1">// set MIME type to HTML </span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;h1&gt;The date is: </span><span class="dl">'</span> <span class="o">+</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&lt;/h1&gt;</span><span class="dl">'</span><span class="p">);</span> <span class="c1">//write a response to the client</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span> <span class="c1">//end the response</span>
<span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="mi">8080</span><span class="p">);</span> <span class="c1">//the server object listens on port 8080</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hello world HTTP server listening on localhost port 8080</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>
<p>Open a terminal and run it using node.js. OPen a browser and make a request to localhost:8080</p>

<p>a) Why is this a “dynamic” web page?</p>

<p>b) Does the request matter? Where is the route handled?</p>

<p>c) When you do a “view source” in the browser, where is the Javascript code?</p>

<h4 id="exercise-3">Exercise #3:</h4>
<p>Make a copy of the file <code class="language-plaintext highlighter-rouge">Ex2.js</code> and change the name to <code class="language-plaintext highlighter-rouge">Ex3.js</code> then change line:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;h1&gt;The date is: </span><span class="dl">'</span> <span class="o">+</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&lt;/h1&gt;</span><span class="dl">'</span><span class="p">);</span> <span class="c1">//write a response to the client</span>
</code></pre></div></div>
<p>to</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;h1&gt;The date is:&lt;script&gt;document.write( Date.now() );&lt;/script&gt;&lt;/h1&gt;</span><span class="dl">'</span><span class="p">);</span> <span class="c1">//write a response to the client</span>
</code></pre></div></div>
<p>Save the file, stop node.js and re-run (the new code needs to be loaded into Node.js)</p>

<p>Now, explain why this is the same result as the previous dynamic web page example, but also explain how it is different.</p>

<h4 id="exercise-4-page-redirection">Exercise #4: Page redirection</h4>

<p>It is is common that a web app will need to direct the user to a different page other than the one requested. Say you want the user to be sent to google.com after requesting something from the server. This can be done in various different ways as we will explore. First make a copy of the file <code class="language-plaintext highlighter-rouge">Ex3.js</code> and change the name to <code class="language-plaintext highlighter-rouge">Ex4.js</code>.</p>

<h5 id="task1-redirect-on-the-client-with-html">Task1: Redirect on the client with HTML.</h5>

<p>Change the string inside the <code class="language-plaintext highlighter-rouge">res.write()</code> to respond to HTTP requests with</p>

<pre><code class="language-HTML">&lt;META http-equiv ="refresh" content="0;URL=http://www.google.com"&gt;
</code></pre>

<p>Stop and restart node.js and go to localhost:8080 to verify you get directed to google.com. Now stop node.js and go to localhost:8080 and verify you get a page not found.</p>

<h5 id="task-2-redirect-on-the-client-with-javascript">Task 2: Redirect on the client with Javascript:</h5>
<p>Copy the <code class="language-plaintext highlighter-rouge">res.write()</code> line and paste it below the original. In the copied change the string inside the <code class="language-plaintext highlighter-rouge">res.write()</code> of the copied line to respond to HTTP requests with</p>

<pre><code class="language-Javascript">&lt;script&gt;window.location = "http://www.apple.com"&lt;/script&gt;;
</code></pre>
<p>Stop and restart node.js and go to localhost:8080 to verifiy you go to apple.com. Notice that you no longer go to google.com even though the HTML redirect is still there! Now stop node.js and go to localhost:8080 and verify you go get a page not found.</p>

<h5 id="task-3-redirect-by-changing-the-routing-on-the-server">Task 3: Redirect by changing the routing on the server:</h5>

<p>Copy the <code class="language-plaintext highlighter-rouge">res.writeHead()</code> line and replace the string in the copy with:</p>

<pre><code class="language-Javascript"> res.writeHead(301, { "Location": "http://amazon.com"}); 
</code></pre>
<p>Stop and restart node.js and go to localhost:8080. Notice that you no longer go to apple.com even though the Javascript redirect is still there. Now stop node.js and try going to localhost:8080. Did you get a page not found?</p>

<p>Questions to discuss:
Explain how these each work differently and when you might choose one way over another. Which ones would enable you to use the browser “back” or history? Hint: the server side redirect can not be stopped or changed by the user.</p>

<h4 id="exercise-5-mixing-client-and-server-processing-to-modify-dom-objects">Exercise #5: Mixing client and server processing to modify DOM objects</h4>
<p>First make a copy of the file <code class="language-plaintext highlighter-rouge">Ex3.js</code> (note, this is from <strong>Exercise 3</strong> not 4) and change the name to <code class="language-plaintext highlighter-rouge">Ex5.js</code>.
In your server code, replace</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;h1&gt;The date is:&lt;script&gt;document.write( Date.now() );&lt;/script&gt;&lt;/h1&gt;</span><span class="dl">'</span><span class="p">);</span> <span class="c1">//write a response to the client</span>
</code></pre></div></div>
<p>with</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text/html</span><span class="dl">'</span> <span class="p">});</span> <span class="c1">// set MIME type to HTML </span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="dl">"</span><span class="s2">&lt;body&gt;&lt;/body&gt;&lt;script&gt;document.body.style.backgroundColor= 'rgb(</span><span class="dl">"</span>
    <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">,</span><span class="dl">'</span>
    <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">,</span><span class="dl">'</span>
    <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">)';&lt;/script&gt;</span><span class="dl">"</span>
  <span class="p">);</span> <span class="c1">//write a response to the client</span>
</code></pre></div></div>
<p>Stop node.js and restart with the new code. View the page then try refreshing a few time. Now view the page source. Explain how this blends both client and server side processing.</p>

</div>




<!-- Maybe find a different way?
<script src="/ITM352/js/scrollIfAnchor.js"></script>
-->

<footer class="footer footer-background" style="padding-top: 1em; padding-bottom: 1em">
  <div class="container text-center">
    
    <p>Dan Port | Information Technology Management | University of Hawaii, Manoa <br />
dport@hawaii.edu<br /></p>

    
    <p style="margin: 0">Powered by the <a class="footer-link" href="https://morea-framework.github.io/">Morea Framework</a> (Theme: spacelab)<br>
      Last update on: <span>2023-12-06 16:10:13 -1000</span></p>

    <p style="margin: 0">
      
      19 modules
      
      | 19 outcomes
      
      
      | 42 readings
      
      
      | 86 experiences
      
      
    </p>
  </div>
</footer>


<!-- Load Bootstrap JavaScript components -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>


<script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-MML-AM_CHTML">
</script>


<!-- Add anchors to pages. -->
<script>anchors.add();</script>


</body>
</html>
